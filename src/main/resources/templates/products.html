<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.tymelif.org" xmlns:background-color="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Аналитика продаж</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/jbootstrap.min.js"></script>
</head>
<body>
<h1>Список покупок</h1>
<div >
    <table th:if="${products.size()>0}" class="table">
        <thead class="thead-dark table-hover">
        <tr>
            <td>Код </td>
            <td>Наименование</td>
            <td>Цена</td>
            <td>Количество</td>
            <td>Стоимость</td>
        </tr>
        </thead>
        <tbody>
        <tr th:each="product : ${products}" class="table-light">
            <td th:text ="${product.product_code}" />
            <td th:text ="${product.name}" />
            <td th:text ="${product.price}" />
            <td th:text ="${product.count}" />
            <td th:text ="${product.price*product.count}" />
        </tr>
        </tbody>
        <tfoot>
        <tr class="table-success">
            <td></td>
            <td></td>
            <td></td>
            <td><b class="float-right">TOTAL:</b></td>
            <td>
               <span th:text="${#aggregates.sum(products.![price*count])}">00.00</span>
            </td>
            </tr>
        </tfoot>
    </table>

</div>

</body>
</html>